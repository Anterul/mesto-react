{"ast":null,"code":"import _classCallCheck from\"/home/anteru/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/anteru/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this._baseUrl=baseUrl;this.authorization=headers.authorization;}_createClass(Api,[{key:\"_getResponseData\",value:function _getResponseData(res){if(!res.ok){return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}return res.json();}},{key:\"getUserInfo\",value:function getUserInfo(url){return fetch(url,{method:'GET',headers:{authorization:this.authorization}}).then(this._getResponseData);}},{key:\"getInitialCards\",value:function getInitialCards(){return fetch(\"\".concat(this._baseUrl,\"/cards\"),{method:'GET',headers:{authorization:this.authorization}}).then(this._getResponseData);}},{key:\"submitProfileData\",value:function submitProfileData(name,about){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:'PATCH',headers:{authorization:this.authorization,'Content-Type':'application/json'},body:JSON.stringify({name:name,about:about})}).then(this._getResponseData);}},{key:\"deleteCard\",value:function deleteCard(id){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id),{method:'DELETE',headers:{authorization:this.authorization}}).then(this._getResponseData);}},{key:\"addNewCard\",value:function addNewCard(name,link){return fetch(\"\".concat(this._baseUrl,\"/cards\"),{method:'POST',headers:{authorization:this.authorization,'Content-Type':'application/json'},body:JSON.stringify({name:name,link:link})}).then(this._getResponseData);}},{key:\"likeCard\",value:function likeCard(id){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id,\"/likes\"),{method:'PUT',headers:{authorization:this.authorization}}).then(this._getResponseData);}},{key:\"dislikeCard\",value:function dislikeCard(id){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id,\"/likes\"),{method:'DELETE',headers:{authorization:this.authorization}}).then(this._getResponseData);}},{key:\"updateAvatar\",value:function updateAvatar(avatarUrl){return fetch(\"\".concat(this._baseUrl,\"/users/me/avatar\"),{method:'PATCH',headers:{authorization:this.authorization,'Content-Type':'application/json'},body:JSON.stringify({avatar:avatarUrl})}).then(this._getResponseData);}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(id,isLiked){if(isLiked){return this.likeCard(id);}else{return this.dislikeCard(id);}}}]);return Api;}();var api=new Api({baseUrl:\"https://mesto.nomoreparties.co/v1/cohort-57\",headers:{authorization:'cc8211c2-a478-4e6c-819c-a7ec6fb1096c'}});export default api;","map":{"version":3,"names":["Api","baseUrl","headers","_baseUrl","authorization","res","ok","Promise","reject","status","json","url","fetch","method","then","_getResponseData","name","about","body","JSON","stringify","id","link","avatarUrl","avatar","isLiked","likeCard","dislikeCard","api"],"sources":["/home/anteru/dev/react-mesto-auth/src/utils/Api.js"],"sourcesContent":["class Api {\n  constructor({baseUrl, headers}) {\n    this._baseUrl = baseUrl;\n    this.authorization = headers.authorization;\n  }\n  \n  _getResponseData(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`); \n    }\n    return res.json();\n  }\n\n  getUserInfo(url) {\n    return fetch(url, {\n      method: 'GET',\n      headers: {\n        authorization: this.authorization,\n      }\n    })\n    .then(this._getResponseData)\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'GET',\n      headers: {\n        authorization: this.authorization,\n      }\n    })\n    .then(this._getResponseData)\n  }\n\n  submitProfileData(name, about) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this.authorization,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    })\n    .then(this._getResponseData)\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._baseUrl}/cards/${id}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this.authorization,\n      },\n    })\n    .then(this._getResponseData)\n  }\n\n  addNewCard(name, link) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this.authorization,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    })\n    .then(this._getResponseData)\n  }\n\n  likeCard(id) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: 'PUT',\n      headers: {\n        authorization: this.authorization,\n      },\n    })\n    .then(this._getResponseData)\n  }\n\n  dislikeCard(id) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this.authorization,\n      },\n    })\n    .then(this._getResponseData)\n  }\n\n  updateAvatar(avatarUrl) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this.authorization,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: avatarUrl\n      })\n    })\n    .then(this._getResponseData)\n  }\n\n  changeLikeCardStatus(id, isLiked) {\n    if (isLiked) {\n      return this.likeCard(id);\n    } else {\n      return this.dislikeCard(id)\n    }\n  }\n\n}\n\nconst api = new Api({\n  baseUrl: `https://mesto.nomoreparties.co/v1/cohort-57`,\n  headers: {\n    authorization: 'cc8211c2-a478-4e6c-819c-a7ec6fb1096c'\n  }\n});\n\nexport default api;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}